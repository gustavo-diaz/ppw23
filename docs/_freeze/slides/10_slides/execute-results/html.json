{
  "hash": "353e852318e18b200e9d63cfadd6d6d1",
  "result": {
    "markdown": "---\nformat:\n  revealjs:\n    theme: [default, custom.scss]\n    slide-number: true\n---\n\n\n\n\n\n::: {style=\"text-align: center\"}\n## Field Experiments II {.center background-color=\"#ac1455\"}\n\n&nbsp;\n\n**POLSCI 4SS3**  \nWinter 2023\n:::\n\n## Last time {background-color=\"#FDBF57\"}\n\n- We learned about implementing field experients\n\n- Lots of details!\n\n- Sometimes cannot simply randomly assign `(stepped-wedge design)`\n\n- **Today:** Thinking about how to do better\n\n## Why do better?\n\n::: incremental\n\n- Conducting research is expensive\n\n- Field experiments are **very** expensive\n\n- Even if you had the resources, we have a mandate to do better\n\n:::\n\n## Research ethics\n\n::: incremental\n\n- [**Belmont report:**](https://www.hhs.gov/ohrp/regulations-and-policy/belmont-report/index.html) Benefits should outweigh costs\n\n- **{{< fa book >}}:** Researchers have duties beyond getting review board approval\n\n- At a minimum, participating in a study takes time\n\n- **Mandate:** Find the most efficient, ethical study before collecting data\n\n- Sometimes that means doing more with a *smaller sample*\n\n:::\n\n# Improving Precision\n\n## Pre-post design\n\n. . .\n\n- Similar to panel studies\n\n- Outcomes are measured *at least* twice\n\n- Once before treatment, once after treatment\n\n. . .\n\n\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Condition </th>\n   <th style=\"text-align:left;\"> \\(t=1\\) </th>\n   <th style=\"text-align:center;\"> Treatment </th>\n   <th style=\"text-align:left;\"> \\(t=2\\) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> \\(Z_i=1\\) </td>\n   <td style=\"text-align:left;\"> \\(Y_{i, t=1}\\) </td>\n   <td style=\"text-align:center;\"> X </td>\n   <td style=\"text-align:left;\"> \\(Y_{i, t=2}(1)\\) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> \\(Z_i=0\\) </td>\n   <td style=\"text-align:left;\"> \\(Y_{i, t=1}\\) </td>\n   <td style=\"text-align:center;\">  </td>\n   <td style=\"text-align:left;\"> \\(Y_{i, t=2}(0)\\) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n\n::: aside\nAKA repeated measures design\n:::\n\n\n## How does this work?\n\n. . .\n\n- Standard ATE estimator:\n\n$$\nE[Y_i(1) | Z_i = 1] - E[Y_i(0) | Z_i = 0]\n$$\n\n. . .\n\n- Pre-post ATE estimator:\n\n$$\nE[(Y_{i,t=2}(1) - Y_{i,t=1}) | Z_i = 1] - E[(Y_{i,t=2}(0) - Y_{i,t=1}) | Z_i = 0]\n$$\n\n## How does this work? {visibility=\"uncounted\"}\n\n- Standard ATE estimator:\n\n$$\nE[Y_i(1) | Z_i = 1] - E[Y_i(0) | Z_i = 0]\n$$\n\n- Pre-post ATE estimator:\n\n$$\nE[(Y_{i,t=2}(1) \\color{#ac1455} {- Y_{i,t=1}}) | Z_i = 1] - E[(Y_{i,t=2}(0) \\color{#ac1455} {- Y_{i,t=1}}) | Z_i = 0]\n$$\n\n. . .\n\n- We improve precision by subtracting the variation in the outcome that is unrelated to the treatment\n\n## Pre-post design as a graph\n\n\n::: {.cell-output-display}\n![](10_slides_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n\n\n## Block randomization\n\n::: incremental\n\n- Change how randomization happens\n\n- Group units in *blocks* or *strata*\n\n- Estimate average treatment effect within each\n\n- Aggregate with a weighted average\n\n:::\n\n## How does it work?\n\n. . .\n\n- Within-block ATE estimator:\n\n$$\n\\widehat{ATE}_b = E[Y_{ib}(1) | Z_{ib} = 1] - E[Y_{ib}(0) | Z_{ib} = 0]\n$$\n\n. . .\n\n- Overall ATE estimator:\n\n$$\n\\widehat{ATE}_{\\text{Block}} = \\sum_{b=1}^B \\frac{n_b}{N} \\widehat{ATE}_b\n$$\n\n## Illustration\n\n:::: {.columns}\n\n::: {.column width=\"60%\"}\n\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> ID </th>\n   <th style=\"text-align:right;\"> Block </th>\n   <th style=\"text-align:right;\"> \\(Y_i(0)\\) </th>\n   <th style=\"text-align:right;\"> \\(Y_i(1)\\) </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 2 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 2 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 3 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 4 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 4 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 1 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 2 </td>\n   <td style=\"text-align:right;background-color: #dcdcdc !important;\"> 5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 9 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 9 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: incremental\n- Potential outcomes *correlate* with blocks\n\n- True $ATE = 4$\n\n- Do 500 experiments\n\n- Compare complete and block-randomized experiment\n:::\n\n:::\n\n::::\n\n## Simulation\n\n\n::: {.cell hash='10_slides_cache/revealjs/sims_e4762a1d16b7bcdb5d149ca91d5b39a3'}\n\n:::\n\n::: {.cell-output-display}\n![](10_slides_files/figure-revealjs/unnamed-chunk-4-1.png){width=960}\n:::\n\n\n::: aside\nBlock randomization yields a narrower distribution of estimates\n:::\n\n## Reasons to block randomize\n\n1. To increase precision in ATE estimates\n\n2. To account for possible heterogeneous treatment effects\n\n. . .\n\n- The more blocking variables correlate with potential outcomes, the more useful block randomization is\n\n- And it rarely hurts when they do not correlate! `(more in the lab!)`\n\n# Example\n\n## Kalla et al (2018): Are You My Mentor?\n\n::: incremental\n- Correspondence experiment with $N = 8189$ legislators in the US\n\n- Send email about fake student seeking advice to become politician\n\n- Cue gender with student's name\n:::\n\n::: aside\nAlso called *audit* experiments since they were originally designed to audit how responsive elected officials are\n:::\n\n## Sample email\n\n![](figs/kalla_0.png){fig-align=\"center\"}\n\n## Data strategy\n\n- Block-randomize by legislator's gender `(why?)`\n\n- **Outcomes:** Reply content and length\n\n## Findings {.smaller}\n\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Outcome </th>\n   <th style=\"text-align:right;\"> Male Sender </th>\n   <th style=\"text-align:right;\"> Female Sender </th>\n   <th style=\"text-align:right;\"> p-value </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Received reply </td>\n   <td style=\"text-align:right;\"> 0.25 </td>\n   <td style=\"text-align:right;\"> 0.27 </td>\n   <td style=\"text-align:right;\"> 0.15 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Meaningful response </td>\n   <td style=\"text-align:right;\"> 0.11 </td>\n   <td style=\"text-align:right;\"> 0.13 </td>\n   <td style=\"text-align:right;\"> 0.47 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Praised </td>\n   <td style=\"text-align:right;\"> 0.05 </td>\n   <td style=\"text-align:right;\"> 0.06 </td>\n   <td style=\"text-align:right;\"> 0.17 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Offer to help </td>\n   <td style=\"text-align:right;\"> 0.03 </td>\n   <td style=\"text-align:right;\"> 0.05 </td>\n   <td style=\"text-align:right;\"> 0.09 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Warned against running </td>\n   <td style=\"text-align:right;\"> 0.01 </td>\n   <td style=\"text-align:right;\"> 0.02 </td>\n   <td style=\"text-align:right;\"> 0.14 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Substantive advice </td>\n   <td style=\"text-align:right;\"> 0.07 </td>\n   <td style=\"text-align:right;\"> 0.08 </td>\n   <td style=\"text-align:right;\"> 0.33 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Word count (logged) </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n   <td style=\"text-align:right;\"> 1.10 </td>\n   <td style=\"text-align:right;\"> 0.06 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Character count </td>\n   <td style=\"text-align:right;\"> 145.00 </td>\n   <td style=\"text-align:right;\"> 170.00 </td>\n   <td style=\"text-align:right;\"> 0.04 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n\n. . .\n\n- Why not much difference by gender?\n\n::: aside\nAdapted from Table 1\n:::\n\n\n::: {style=\"text-align: center\"}\n## Break time! {.center background-color=\"#D2D755\"}\n\n&nbsp;\n\n![](figs/panda_dance.gif){fig-align=\"center\" width=\"10%\" height=\"10%\"} \n:::\n\n::: {style=\"text-align: center\"}\n## {{< fa laptop-code >}} Lab {.center background-color=\"#007096\"}\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ],
      "include-after-body": [
        "\r\n<script>\r\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\r\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\r\n  // slide changes (different for each slide format).\r\n  (function () {\r\n    // dispatch for htmlwidgets\r\n    function fireSlideEnter() {\r\n      const event = window.document.createEvent(\"Event\");\r\n      event.initEvent(\"slideenter\", true, true);\r\n      window.document.dispatchEvent(event);\r\n    }\r\n\r\n    function fireSlideChanged(previousSlide, currentSlide) {\r\n      fireSlideEnter();\r\n\r\n      // dispatch for shiny\r\n      if (window.jQuery) {\r\n        if (previousSlide) {\r\n          window.jQuery(previousSlide).trigger(\"hidden\");\r\n        }\r\n        if (currentSlide) {\r\n          window.jQuery(currentSlide).trigger(\"shown\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // hookup for slidy\r\n    if (window.w3c_slidy) {\r\n      window.w3c_slidy.add_observer(function (slide_num) {\r\n        // slide_num starts at position 1\r\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\r\n      });\r\n    }\r\n\r\n  })();\r\n</script>\r\n\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}